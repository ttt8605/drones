<head>
  <link rel="stylesheet" href="/stylesheets/new-edit.css">
</head>
<% layout('/layouts/boilerplate') %>
<div class="row">
  <div class="col-md-6 offset-md-3 mb-4">
      <div class="card shadow">
          <div class="card-body">
              <h2 class="text-center card-title mb-4">Edit Project</h2>
<form action="/projects/<%=project._id %>?_method=PUT" method="POST" novalidate  class="validated-form" enctype="multipart/form-data" >
    <div class=" mb-3">
     <label for="name" class="form-label text">Name of the project</label>
     <input type="text" name="name" id="name" class="form-control" placeholder="projectname" value="<%= project.name %>" autofocus required>
     <div class="valid-feedback">
      Looks good!
     </div>
    </div>
    <script>
      document.addEventListener('DOMContentLoaded', function () {
   bsCustomFileInput.init();
 });
   </script>
   <div class="mb-3">
     <div class="form-file custom-file">
         <input type="file" class="form-file-input" id="image" name="image" multiple>
         <label class="form-file-label" for="image">
             <span class="form-file-text custom-file-label">Choose image(s)...</span>
             <span class="form-file-button">Browse</span>
         </label>
     </div>
 </div>
 <div class=" mb-3">
  <label for="link" class="form-label text">Youtube link</label>
  <input type="url" name="link" id="link" class="form-control" placeholder="youtube link" value="<%=project.link %>" required>
  <div class="valid-feedback">
   Looks good!
  </div>
 </div>

       <div class="mb-3">
        <label class="form-label text" for="description">Description</label>
        <textarea class="form-control" name="description" id="description" aria-label="Description" rows="10" maxlength="400" required><%=project.description %></textarea>
        <div class="valid-feedback">
          Looks good!
         </div>
      </div>
 
      <div class="mb-3">
        <label class="text" for="drones">Drones used:</label>
        <% for(let drone of drones){ %>
          <div class="form-check form-check-inline" id="drones">
              <input class="form-check-input text drone-checkbox" type="checkbox" name="drones[]" id="drone_<%=drone._id%>" value="<%=drone._id %>"
              <% if (project.drones.includes(drone._id)) { %> checked <% } %>>
              <label class="form-check-label text" for="inlineCheckbox1"><%=drone.name %></label>
            </div>
            <% } %>
    </div>
    <div class="mb-3 mt-4">
      <h6 class="text mb-3">Choose the images you want to delete:</h6>
      <% project.images.forEach(function(img,i){ %>
        <img src="<%=img.thumbnail%>" class="img-thumbnail" alt="">
        <div class="form-check-inline md-3">
          <input type="checkbox" id="image-<%=i%>" name="deleteImages[]" value="<%=img.filename %>">
           <label class="text" for="image-<%=i%>">Delete</label>
       </div>
      
        <% }) %>
    </div>
      <div class="mb-3">
        <button class="btn btn-success btn-block">Edit Project</button>
        </div>

</form>


</div>

</div>

